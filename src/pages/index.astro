---
import BaseLayout from '../layouts/BaseLayout.astro';
import tensesData from '../data/tenses.json';

const tenses = Object.values(tensesData);
---

<BaseLayout>
  <link slot="head" rel="stylesheet" href="/src/styles/base.css" />
  
  <div class="app-container">
    <header class="header">
      <div class="header-top">
        <div>
          <div style="font-size:0.8rem;color:var(--primary-light);font-weight:600;margin-bottom:4px">üåê –≤—Ä–µ–º–µ–Ω–∞–≤–∞–Ω–≥–ª–∏–π—Å–∫–æ–º.—Ä—Ñ</div>
          <h1>üéØ Tense Trainer ‚Äî –¢—Ä–µ–Ω–∞–∂–µ—Ä –∞–Ω–≥–ª–∏–π—Å–∫–∏—Ö –≤—Ä–µ–º—ë–Ω</h1>
          <p>–ò–∑—É—á–∞–µ–º –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –≤—Ä–µ–º–µ–Ω–∞ –ª–µ–≥–∫–æ –∏ –≤–µ—Å–µ–ª–æ! –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –¥–ª—è –¥–µ—Ç–µ–π 10-12 –ª–µ—Ç</p>
        </div>
        <button class="theme-toggle" id="themeToggle" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">üåô</button>
      </div>
    </header>

    <nav class="nav" role="navigation" aria-label="–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é">
      <a href="#home" class="nav-btn active">üè† –ì–ª–∞–≤–Ω–∞—è</a>
      <a href="#tenses" class="nav-btn">üìö –í—Ä–µ–º–µ–Ω–∞</a>
      <a href="#tobe" class="nav-btn">üîÑ To Be</a>
    </nav>

    <!-- SEO-–∫–æ–Ω—Ç–µ–Ω—Ç: –¢–∞–±–ª–∏—Ü–∞ –≤—Å–µ—Ö –≤—Ä–µ–º–µ–Ω (–≤–∏–¥–Ω–∞ –±–µ–∑ JS) -->
    <section id="tenses" class="card" aria-labelledby="tenses-heading">
      <h2 id="tenses-heading" class="card-title">üìö –í—Å–µ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –≤—Ä–µ–º–µ–Ω–∞</h2>
      <p style="margin-bottom: 16px; color: var(--text-muted);">
        –¢–∞–±–ª–∏—Ü–∞ –∏–∑ 12 –∞–Ω–≥–ª–∏–π—Å–∫–∏—Ö –≤—Ä–µ–º—ë–Ω —Å —Ñ–æ—Ä–º—É–ª–∞–º–∏, –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏ —Å–∏–≥–Ω–∞–ª—å–Ω—ã–º–∏ —Å–ª–æ–≤–∞–º–∏.
        –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –≤—Ä–µ–º—è, —á—Ç–æ–±—ã –∏–∑—É—á–∏—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ.
      </p>
      
      <div class="tense-grid" role="list">
        {tenses.map((tense) => (
          <article class="tense-card" role="listitem">
            <h3>{tense.nameRu}</h3>
            <p style="color:var(--text-muted);margin-bottom:8px;font-size:0.9rem;">{tense.nameEn}</p>
            
            <div class="formula-box" style="margin: 12px 0;">
              <div class="formula-row">
                <span class="formula-label pos">+</span>
                <span style="font-size:0.85rem;">{tense.formulas.affirmative.substring(0, 60)}...</span>
              </div>
            </div>

            <div style="margin: 12px 0;">
              <strong style="font-size:0.85rem;">üîî –°–∏–≥–Ω–∞–ª—å–Ω—ã–µ —Å–ª–æ–≤–∞:</strong>
              <div style="margin-top:8px;">
                {tense.signalWords.slice(0, 4).map((word) => (
                  <span class="signal-word">{word}</span>
                ))}
              </div>
            </div>

            <div style="margin-top: 12px;">
              <strong style="font-size:0.85rem;">üìù –ü—Ä–∏–º–µ—Ä:</strong>
              <div class="example-box" style="margin-top:8px;">
                <p class="example-en">{tense.examples[0].en}</p>
                <p class="example-ru">{tense.examples[0].ru}</p>
              </div>
            </div>
          </article>
        ))}
      </div>
    </section>

    <!-- To Be —Å–µ–∫—Ü–∏—è -->
    <section id="tobe" class="card">
      <h2 class="card-title">üîÑ –ì–ª–∞–≥–æ–ª To Be</h2>
      
      <div class="tobe-cheat">
        <h3>üìñ –¢–∞–±–ª–∏—Ü–∞ —Å–ø—Ä—è–∂–µ–Ω–∏—è To Be</h3>
        <table class="tobe-table">
          <thead>
            <tr>
              <th></th>
              <th>I</th>
              <th>you/we/they</th>
              <th>he/she/it</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Present</strong></td>
              <td>am</td>
              <td>are</td>
              <td>is</td>
            </tr>
            <tr>
              <td><strong>Past</strong></td>
              <td>was</td>
              <td>were</td>
              <td>was</td>
            </tr>
            <tr>
              <td><strong>Future</strong></td>
              <td colspan="3">will be</td>
            </tr>
          </tbody>
        </table>
        <p style="margin-top: 12px; font-size: 0.9rem;">
          üí° <strong>–ü—Ä–∞–≤–∏–ª–æ:</strong> I ‚Üí am, he/she/it ‚Üí is, you/we/they ‚Üí are | Future ‚Üí will be (–¥–ª—è –≤—Å–µ—Ö)
        </p>
      </div>
    </section>

    <!-- –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç -->
    <section id="home" class="card quick-start">
      <h3>‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç</h3>
      <p>–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ç–æ–≤—ã–π –ø–ª–∞–Ω –æ–±—É—á–µ–Ω–∏—è:</p>
      
      <div class="preset-btns">
        <button class="preset-btn">–ë–∞–∑–∞: Present + Past</button>
        <button class="preset-btn">–¢—Ä–∏ –ø—Ä–æ—Å—Ç—ã—Ö</button>
        <button class="preset-btn">–î–≤–∏–∂–µ–Ω–∏–µ</button>
        <button class="preset-btn">–†–µ–∑—É–ª—å—Ç–∞—Ç</button>
      </div>
      
      <p style="margin-top: 12px; color: #92400e;">
        üí° <strong>–°–æ–≤–µ—Ç:</strong> –ù–∞—á–Ω–∏—Ç–µ —Å Present Simple ‚Äî —ç—Ç–æ —Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö.
      </p>
    </section>

    <!-- –î–ª—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π -->
    <section class="parent-section">
      <h4>üë®‚Äçüë©‚Äçüëß –°–æ–≤–µ—Ç—ã –¥–ª—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π</h4>
      
      <div class="parent-tip">
        <strong>üìã –ö–∞–∫ —Å–æ—Å—Ç–∞–≤–ª—è—Ç—å –ø–ª–∞–Ω:</strong><br>
        –í—ã–±–∏—Ä–∞–π—Ç–µ –º–∞–∫—Å–∏–º—É–º 2-3 –≤—Ä–µ–º–µ–Ω–∏ –∑–∞ —Ä–∞–∑. –õ—É—á—à–µ —É—á–∏—Ç—å –º–µ–Ω—å—à–µ, –Ω–æ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ!
      </div>
      
      <div class="parent-tip">
        <strong>‚è±Ô∏è –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è:</strong><br>
        10-15 –º–∏–Ω—É—Ç –≤ –¥–µ–Ω—å ‚Äî –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —Ä–µ–±—ë–Ω–∫–∞ 10-12 –ª–µ—Ç.
      </div>
      
      <div class="parent-tip">
        <strong>üí™ –ö–∞–∫ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å:</strong><br>
        –•–≤–∞–ª–∏—Ç–µ –∑–∞ –ø–æ–ø—ã—Ç–∫–∏, –Ω–µ —Ä—É–≥–∞–π—Ç–µ –∑–∞ –æ—à–∏–±–∫–∏. –û—à–∏–±–∫–∏ ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!
      </div>
      
      <div class="parent-tip">
        <strong>üéØ –†–µ–≥—É–ª—è—Ä–Ω–æ—Å—Ç—å –≤–∞–∂–Ω–µ–µ:</strong><br>
        –õ—É—á—à–µ 10 –º–∏–Ω—É—Ç –∫–∞–∂–¥—ã–π –¥–µ–Ω—å, —á–µ–º —á–∞—Å —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é.
      </div>
    </section>

    <footer>
      <p style="margin:0 0 0.5rem;font-weight:600;color:var(--text)">üìß –†–µ–∫–ª–∞–º–∞ –Ω–∞ —Å–∞–π—Ç–µ</p>
      <p style="margin:0 0 0.5rem">–¢–µ–ª–µ—Ñ–æ–Ω: <a href="tel:+79055529581" style="color:var(--primary);text-decoration:none">+7 (905) 552-95-81</a></p>
      <p style="margin:0;font-size:0.875rem">¬© 2026 Tense Trainer ‚Äî –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç—Ä–µ–Ω–∞–∂—ë—Ä –∞–Ω–≥–ª–∏–π—Å–∫–∏—Ö –≤—Ä–µ–º—ë–Ω</p>
    </footer>
  </div>

  <script>
    // –¢–µ–º–Ω–∞—è —Ç–µ–º–∞
    const themeToggle = document.getElementById('themeToggle');
    const savedTheme = localStorage.getItem('tenseTrainer_theme');
    if (savedTheme) {
      document.documentElement.setAttribute('data-theme', savedTheme);
    }
    if (themeToggle) {
      themeToggle.addEventListener('click', () => {
        const current = document.documentElement.getAttribute('data-theme');
        const next = current === 'dark' ? 'light' : 'dark';
        document.documentElement.setAttribute('data-theme', next);
        localStorage.setItem('tenseTrainer_theme', next);
      });
    }
  </script>
</BaseLayout>
